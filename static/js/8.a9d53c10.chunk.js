(this["webpackJsonpstudy-react-three-fiber"]=this["webpackJsonpstudy-react-three-fiber"]||[]).push([[8],{28:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(27);function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=function(){var e=new i.OrthographicCamera(-1,1,1,-1,0,1),t=new i.PlaneBufferGeometry(2,2),r=function(e){this._mesh=new i.Mesh(t,e)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),r}()},31:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},32:function(e,t,r){"use strict";var i=r(29),s=r(0),n=r.n(s);function a(){var e=Object(i.a)(["\n    color: white;\n    position: absolute;\n    top: 2%;\n    left: 5%;\n    z-index: 100;\n    font-family: Sans-Serif;\n"]);return a=function(){return e},e}var o=r(30).a.h1(a());t.a=function(e){return n.a.createElement(o,null,e.title)}},33:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(28),s=function(e,t,r,s,n){i.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=s,this.clearAlpha=void 0!==n?n:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,render:function(e,t,r){var i,s,n,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(n=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(i=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(i,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=n),e.autoClear=a}})},34:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(27),s=r(31),n=r(28),a=function(e,t){n.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof i.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=i.UniformsUtils.clone(e.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new n.a.FullScreenQuad(this.material)};a.prototype=Object.assign(Object.create(n.a.prototype),{constructor:a,render:function(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var o=function(e,t){n.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};o.prototype=Object.assign(Object.create(n.a.prototype),{constructor:o,render:function(e,t,r){var i,s,n=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(i=0,s=1):(i=1,s=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),a.buffers.stencil.setFunc(n.ALWAYS,i,4294967295),a.buffers.stencil.setClear(s),a.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(n.EQUAL,1,4294967295),a.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),a.buffers.stencil.setLocked(!0)}});var h=function(){n.a.call(this),this.needsSwap=!1};h.prototype=Object.create(n.a.prototype),Object.assign(h.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var c=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},n=e.getSize(new i.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===s.a&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new a(s.a),this.clock=new i.Clock};Object.assign(c.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,r,i=this.renderer.getRenderTarget(),s=!1,n=this.passes.length;for(r=0;r<n;r++)if(!1!==(t=this.passes[r]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),t.needsSwap){if(s){var a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==o&&(t instanceof o?s=!0:t instanceof h&&(s=!1))}this.renderer.setRenderTarget(i)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(var s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var l=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(l.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),l.FullScreenQuad=function(){var e=new i.OrthographicCamera(-1,1,1,-1,0,1),t=new i.PlaneBufferGeometry(2,2),r=function(e){this._mesh=new i.Mesh(t,e)};return Object.defineProperty(r.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(r.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),r}()},69:function(e,t,r){"use strict";r.r(t);var i=r(35),s=r(29),n=r(0),a=r.n(n),o=r(36),h=r(30),c=r(27),l=r(33),u=r(34),d=r(28),f={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","\treturn max( sign( x - y ), 0.0 );","}","void main() {","\tvec4 texelOld = texture2D( tOld, vUv );","\tvec4 texelNew = texture2D( tNew, vUv );","\ttexelOld *= damp * when_gt( texelOld, 0.1 );","\tgl_FragColor = max(texelNew, texelOld);","}"].join("\n")},m=function(e){d.a.call(this),void 0===f&&console.error("AfterimagePass relies on AfterimageShader"),this.shader=f,this.uniforms=c.UniformsUtils.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==e?e:.96,this.textureComp=new c.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:c.LinearFilter,magFilter:c.NearestFilter,format:c.RGBAFormat}),this.textureOld=new c.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:c.LinearFilter,magFilter:c.NearestFilter,format:c.RGBAFormat}),this.shaderMaterial=new c.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new d.a.FullScreenQuad(this.shaderMaterial);var t=new c.MeshBasicMaterial;this.copyFsQuad=new d.a.FullScreenQuad(t)};m.prototype=Object.assign(Object.create(d.a.prototype),{constructor:m,render:function(e,t,r){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=r.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));var i=this.textureOld;this.textureOld=this.textureComp,this.textureComp=i},setSize:function(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}});var p=r(32);function g(){var e=Object(s.a)(["\n    width: 100vw;\n    height: 100vh;\n    z-index: -100;\n    background-color: $black;\n"]);return g=function(){return e},e}Object(o.b)({EffectComposer:u.a,RenderPass:l.a,AfterimagePass:m});var v=h.a.div(g()),w=function(e){var t=Object(n.useRef)(),r=Object(n.useState)(!1),s=Object(i.a)(r,2),h=s[0],c=s[1];return Object(o.c)((function(){t.current&&(t.current.rotation.x+=.005,t.current.rotation.y+=.01)})),a.a.createElement("mesh",{ref:t,position:e.position,scale:h?[1.5,1.5,1.5]:[1,1,1],onClick:function(e){return c(!h)}},a.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),a.a.createElement("meshNormalMaterial",{attach:"material"}))},b=function(){var e=Object(o.d)(),t=e.gl,r=e.scene,i=e.camera,s=e.size,h=Object(n.useRef)();return r.fog=new c.Fog(0,1,1e3),Object(n.useEffect)((function(){h.current&&h.current.setSize(s.width,s.height)}),[s]),Object(o.c)((function(){h.current&&h.current.render()}),10),a.a.createElement(a.a.Fragment,null,a.a.createElement("effectComposer",{ref:h,args:[t]},a.a.createElement("renderPass",{attachArray:"passes",args:[r,i]}),a.a.createElement("afterimagePass",{attachArray:"passes"})))},x=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("ambientLight",null),a.a.createElement(w,{position:[0,0,0]}),a.a.createElement(b,null))};t.default=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{title:"Tailing Box"}),a.a.createElement(v,null,a.a.createElement(o.a,null,a.a.createElement(x,null))))}}}]);
//# sourceMappingURL=8.a9d53c10.chunk.js.map